"""
תצורת הבוט לגיוס עובדים ב-AIG
מותאם לסריקת קבוצות פייסבוק וזיהוי מועמדים פוטנציאליים
"""

import os
from pathlib import Path
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

# ======================================
# הגדרות בסיסיות
# ======================================
PROJECT_DIR = Path(__file__).parent
DATA_DIR = PROJECT_DIR / "data"
LOGS_DIR = PROJECT_DIR / "logs"

# יצירת תיקיות אם לא קיימות
DATA_DIR.mkdir(exist_ok=True)
LOGS_DIR.mkdir(exist_ok=True)

# ======================================
# קבוצות פייסבוק יעד
# ======================================
TARGET_GROUPS = [
    {
        "name": "דרושים פתח תקווה",
        "url": "https://www.facebook.com/groups/192158107981293",
        "priority": 1
    },
    {
        "name": "דרושים הוד השרון",
        "url": "https://www.facebook.com/groups/1662674880657775",
        "priority": 1
    },
    {
        "name": "דרושים כפר סבא",
        "url": "https://www.facebook.com/groups/1881552518569875",
        "priority": 1
    },
    {
        "name": "משרות חמות באזור השרון",
        "url": "https://www.facebook.com/groups/1942419502675158",
        "priority": 2
    },
    {
        "name": "דרושים במרכז",
        "url": "",
        "priority": 2
    }
]

# ======================================
# מילות מפתח לזיהוי מועמדים
# ======================================
CANDIDATE_KEYWORDS = {
    "positive": [
        # חיפוש עבודה בסיסי
        "מחפש עבודה",
        "מחפשת עבודה",
        "מחפש/ת עבודה",
        "looking for a job",
        "looking for work",

        # עניין במשרה
        "מעוניין במשרה",
        "מעוניינת במשרה",
        "מעוניין/ת במשרה",
        "מעוניין לעבוד",
        "מעוניינת לעבוד",

        # זמינות
        "זמין לעבודה",
        "זמינה לעבודה",
        "זמין/ה לעבודה",
        "זמין מיידי",
        "זמינה מיידי",
        "זמין להתחיל",
        "available for work",

        # צורך בעבודה
        "דרוש עבודה",
        "דרושה עבודה",
        "צריך עבודה",
        "צריכה עבודה",
        "זקוק לעבודה",
        "זקוקה לעבודה",

        # חיפוש תעסוקה/משרה
        "מחפש תעסוקה",
        "מחפשת תעסוקה",
        "מחפש משרה",
        "מחפשת משרה",
        "מחפש מקום עבודה",

        # עזרה במציאת עבודה
        "איך מוצאים עבודה",
        "עזרה במציאת עבודה",
        "מישהו יודע על עבודה",
        "יש למישהו עבודה",
        "מכירים מקום שמחפש",

        # רצון לעבוד
        "רוצה לעבוד",
        "רוצה להתחיל לעבוד",
        "רוצה לחזור לעבוד",
        "מחפש להתחיל",

        # מצב תעסוקתי
        "בחיפוש עבודה",
        "מחפש עבודה חדשה",
        "משתדרג",
        "job search",
        "job hunting",

        # שאלות על עבודה
        "יש עבודה",
        "מישהו מכיר",
        "מכיר מקום",
        "מכירים חברה",

        # CV/קורות חיים
        "שלחו קורות חיים",
        "send cv",
        "cv",
        "קו\"ח",
        "קורות חיים"
    ],
    "negative": [
        # מילות דרוש
        "דרושים",
        "דרוש/ה",
        "דרושה",
        "דרוש למיידי",
        "דרושים מיידי",
        "דרושה במיידי",

        # גיוס
        "מגייסים",
        "מגייסת",
        "מגייס",
        "גיוס",
        "מחפשים עובדים",
        "מחפשים עובד",
        "מחפשת עובדים",

        # חברה מחפשת
        "חברתנו מחפשת",
        "החברה מחפשת",
        "חברה מחפשת",
        "החברה מגייסת",
        "חברתנו מגייסת",

        # משרה/תפקיד מוצע
        "דרושה נציגת",
        "דרוש נציג",
        "למשרה",
        "לתפקיד",
        "למשרת",
        "משרת",  # "משרת בק אופיס", "משרת פיתוח" וכו' (בלי רווח כדי לתפוס גם "משרת." ו"משרתית")
        "משרה ב",
        "משרה של",
        "תפקיד של",
        "משרות ב",

        # מילים שמציינות שזה מעסיק
        "אנחנו מחפשים",
        "אנו מחפשים",
        "מחפשים.ות",
        "מחפשים/ות",
        "דרושים/ות",
        "נפתחו משרות",
        "משרות חדשות",
        "בואו להצטרף",
        "הצטרפו אלינו",
        "recruiting",
        "hiring",
        "we are looking for",

        # ביטויים נוספים של מודעות דרושים
        "לפרטים נוספים",
        "פרטים נוספים",
        "שלחו קו\"ח",
        "שלח קורות חיים",
        "תנאים מעולים",
        "שכר בסיס",
        "קליטה מיידית",
        "התקשרו",
        "לפנות ל",
        "שלחו קורות",
        "יש לשלוח",
        "דרוש למיידי",
        "דרושה במיידי"
    ]
}

# ======================================
# משרות פתוחות ב-AIG
# ======================================
OPEN_POSITIONS = {
    "תותח מכירות למוקד": {
        "title": "תותח/ית מכירות למוקד ביטוחי הבריאות",
        "description": """דרושים/ות תותחי מכירות למוקד ביטוחי הבריאות של AIG!

מה תעשו:
📞 שיחות יוצאות ללקוחות החברה וללקוחות פוטנציאליים
💡 מכירת מוצרי ביטוח בריאות, חיים ותאונות אישיות
🚀 עבודה עצמאית בסביבה דינמית

מה אנחנו מחפשים:
✔ ניסיון במכירות – חובה!
✔ כושר שכנוע וכריזמה
✔ יכולת עמידה ביעדים

מה תקבלו:
💰 שכר בסיס + בונוסים – ממוצע 15,000 ש"ח בחודש!
📅 5 ימים בשבוע + שישי לסירוגין
🎯 הכשרה מקיפה על חשבון החברה
📅 עד יומיים עבודה מהבית
⭐️ נופש חברה + מגוון תנאים מעולים""",
        "requirements": [
            "ניסיון במכירות - חובה",
            "כושר שכנוע וכריזמה",
            "יכולת עמידה ביעדים",
            "מוסר עבודה גבוה"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["מכירות", "שיחות יוצאות", "טלמרקטינג", "מוקד", "ביטוח בריאות", "תותח מכירות", "sales"]
    },
    "סוכן ביטוח": {
        "title": "סוכן/ת ביטוח",
        "description": "משרה מעניינת בתחום הביטוח ב-AIG",
        "requirements": [
            "יכולת מכירה",
            "שירותיות",
            "רצון להתפתח"
        ],
        "locations": ["פתח תקווה", "הוד השרון", "כפר סבא", "המרכז"],
        "keywords": ["מכירות", "שירות", "ביטוח", "סוכן"]
    },
    "שירות לקוחות": {
        "title": "נציג/ת שירות לקוחות",
        "description": "תפקיד בשירות לקוחות בתחום הביטוח",
        "requirements": [
            "יחסי אנוש מעולים",
            "סבלנות",
            "רצון לעזור"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["שירות", "לקוחות", "טלפון"]
    },
    "שירות רכב": {
        "title": "נציג/ת שירות למוקד הרכב",
        "description": """דרושים/ות נציגי/ות שירות למוקד הרכב שלנו! 🚗

📞 עבודה במשמרות – 5 משמרות באמצע השבוע + שישי לסירוגין
💰 שכר ממוצע 45 ₪ לשעה + מענקים עד 8000 ₪!
🎓 הכשרה מלאה על חשבון החברה
👶 גמישות להורים ולסטודנטים

מה נדרש:
✔️ כושר ביטוי
✔️ חוסן אישי
✔️ אסרטיביות

מתאים במיוחד להורים וסטודנטים!""",
        "requirements": [
            "כושר ביטוי",
            "חוסן אישי",
            "אסרטיביות"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["שירות לקוחות", "רכב", "מוקד", "טלפון", "משמרות", "סטודנטים", "הורים", "גמישות"]
    },
    "חידושים": {
        "title": "נציג/ת חידושי ביטוח",
        "description": "טיפול בחידושי פוליסות ביטוח",
        "requirements": [
            "יכולת ארגון",
            "קשר עם לקוחות",
            "עבודה במחשב"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["חידושים", "פוליסות", "ביטוח"]
    },
    "תביעות": {
        "title": "מטפל/ת בתביעות ביטוח",
        "description": "ליווי לקוחות בתהליך התביעה",
        "requirements": [
            "אמפתיה",
            "יכולת ניתוח",
            "סבלנות"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["תביעות", "ביטוח", "שירות"]
    },
    "שימור": {
        "title": "נציג/ת שימור לקוחות",
        "description": "שימור והגדלת תיק לקוחות",
        "requirements": [
            "כישורי שכנוע",
            "שירותיות",
            "יחסי אנוש"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["שימור", "לקוחות", "מכירות"]
    },
    "שימור רכב": {
        "title": "נציג/ת שימור רכב למוקד שיחות יוצאות",
        "description": """דרושים נציגי/ות שימור רכב למוקד שיחות יוצאות! 🚗

📍 משרה מלאה – ללא שישי | שעות 08:00-17:00
💰 שכר מתגמל: ממוצע 12-14K!
🎓 הכשרה מלאה על חשבון החברה

מה תעשו:
📞 שיחות יוצאות ללקוחות קיימים המבקשים לבטל פוליסת ביטוח רכב
💡 מתן מענה מקצועי ושימור לקוחות
🎯 התאמת הפתרון הנכון עבור הלקוח

מה נדרש:
✔️ יכולת מכירה ושכנוע
✔️ כושר ביטוי גבוה ויכולת לנהל שיח פתוח
✔️ אוריינטציה שירותית""",
        "requirements": [
            "יכולת מכירה ושכנוע",
            "כושר ביטוי גבוה",
            "יכולת לנהל שיח פתוח",
            "אוריינטציה שירותית"
        ],
        "locations": ["פתח תקווה", "המרכז"],
        "keywords": ["שימור", "רכב", "ביטוח רכב", "שיחות יוצאות", "מוקד", "טלפון", "לקוחות", "מכירות"]
    }
}

# ======================================
# תבניות תגובות (עם וריאציות)
# ======================================
RESPONSE_TEMPLATES = [
    # תבנית 1 - קצרה וישירה
    """היי{name}, ראיתי שאתה מחפש עבודה.
יש לנו משרה של {job_title} באזור {location}.
אם מעניין שלח לי הודעה ואספר יותר""",

    # תבנית 2 - יותר אישית
    """שלום{name}, נתקלתי בפוסט שלך.
יש לנו תפקיד פתוח של {job_title} ב{location}.
אם רלוונטי תכתוב לי בפרטי""",

    # תבנית 3 - מזדמן
    """היי, מחפש משהו בתחום {job_title}?
יש לנו משרה באזור {location}.
תשלח הודעה אם מעניין""",

    # תבנית 4 - קצר מאוד
    """שלום{name},
יש משרה פתוחה ב{job_title} באזור {location}.
הדרישה העיקרית: {requirements}.
מעניין? כתוב לי בפרטי""",

    # תבנית 5 - יותר חמה
    """היי, אני מגייס ל-AIG.
יש לי משרה של {job_title} ב{location} שאולי תתאים לך.
אם רוצה לשמוע עוד פרטים תכתוב לי"""
]

# ======================================
# הגדרות אוטומציה ובטיחות
# ======================================
AUTOMATION_SETTINGS = {
    # מגבלות יומיות
    "max_responses_per_day": 20,  # מקסימום 20 תגובות ליום
    "max_responses_per_hour": 10,  # מקסימום 10 תגובות לשעה

    # עיכובים (בשניות) - מהיר יותר
    "delay_between_responses_min": 10,   # מינימום 10 שניות
    "delay_between_responses_max": 30,   # מקסימום 30 שניות
    "delay_between_groups_min": 5,       # 5 שניות בין קבוצות
    "delay_between_groups_max": 15,      # 15 שניות בין קבוצות

    # הגדרות סריקה
    "posts_to_scan_per_group": 30,  # 30 פוסטים לכל קבוצה (מהיר יותר)
    "max_post_age_days": 3,         # תגובה רק לפוסטים עד 3 ימים

    # חלונות פעילות (שעות ביום)
    "active_hours_start": 0,   # התחלה ב-0:00 (midnight)
    "active_hours_end": 24,    # סיום ב-24:00 (runs 24/7 for testing)

    # ימי פעילות (Python weekday: Monday=0, Sunday=6)
    "active_days": [0, 1, 2, 3, 4, 5, 6],  # All days (for testing)
}

# ======================================
# הגדרות Playwright לניווט
# ======================================
BROWSER_SETTINGS = {
    "headless": False,  # להתחלה נראה את הדפדפן (לבדיקה)
    "slow_mo": 100,     # האטה של 100ms בין פעולות (מהיר יותר)
    "viewport": {"width": 1280, "height": 720},
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
}

# ======================================
# פרטי התחברות פייסבוק
# ======================================
# שים לב: ליצור חשבון בדיקה נפרד! לא להשתמש בחשבון האישי!
FACEBOOK_CREDENTIALS = {
    "email": os.getenv("FB_EMAIL", ""),  # להגדיר במשתני סביבה
    "password": os.getenv("FB_PASSWORD", "")  # להגדיר במשתני סביבה
}

# ======================================
# הגדרות מסד נתונים
# ======================================
DATABASE_FILE = DATA_DIR / "job_bot.db"

# ======================================
# הגדרות לוגים
# ======================================
LOG_FILE = LOGS_DIR / "bot.log"
LOG_LEVEL = "INFO"
